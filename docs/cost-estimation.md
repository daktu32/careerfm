# コスト試算書

バージョン: 1.1  
作成日: 2025-06-04  
更新日: 2025-06-04  
プロジェクト: Career.fm MVP

---

## 1. 前提条件

### 1.1 利用規模（MVP）
- アクティブユーザー: 10名/月
- 音声名刺作成: 15件/月（1.5件/ユーザー）
- 音声ファイルサイズ: 平均 2MB/件
- 公開ページ閲覧: 300PV/月（20PV/音声名刺）
- データ保存期間: 無制限

### 1.2 計算期間
月額コスト（USD建て、2024年12月時点の料金）

---

## 2. サービス別コスト詳細

### 2.1 Firebase Authentication
| 項目 | 単価 | 利用量 | 月額コスト |
|------|------|---------|-----------|
| アクティブユーザー | 無料枠: 50,000ユーザー/月 | 10ユーザー | **$0** |

**小計: $0**

### 2.2 Firebase Hosting
| 項目 | 単価 | 利用量 | 月額コスト |
|------|------|---------|-----------|
| ストレージ | $0.026/GB | 0.1GB | $0.003 |
| 転送量 | 無料枠: 10GB/月 | 0.5GB | **$0** |

**小計: $0.003**

### 2.3 Cloud Functions
| 項目 | 単価 | 利用量 | 月額コスト |
|------|------|---------|-----------|
| 呼び出し回数 | 無料枠: 200万回/月 | 500回 | **$0** |
| GB秒 | 無料枠: 40万GB秒/月 | 1,000GB秒 | **$0** |

**小計: $0**

### 2.4 Firestore
| 項目 | 単価 | 利用量 | 月額コスト |
|------|------|---------|-----------|
| ドキュメント読み取り | 無料枠: 50,000回/日 | 5,000回/月 | **$0** |
| ドキュメント書き込み | 無料枠: 20,000回/日 | 200回/月 | **$0** |
| ストレージ | 無料枠: 1GB | 0.01GB | **$0** |

**小計: $0**

### 2.5 Cloud Storage
| 項目 | 単価 | 利用量 | 月額コスト |
|------|------|---------|-----------|
| ストレージ（Standard） | $0.020/GB | 0.03GB（30MB） | $0.0006 |
| Class A オペレーション | $0.005/1000回 | 100回 | $0.0005 |
| 下り（egress）トラフィック | $0.12/GB（アジア→全世界） | 0.6GB | $0.072 |

**小計: $0.073**

### 2.6 Pub/Sub（将来のTTS連携用）
| 項目 | 単価 | 利用量 | 月額コスト |
|------|------|---------|-----------|
| メッセージ配信 | 無料枠: 10GB/月 | 0.001GB | **$0** |

**小計: $0**

### 2.7 Cloud Logging
| 項目 | 単価 | 利用量 | 月額コスト |
|------|------|---------|-----------|
| ログ取り込み | 無料枠: 50GB/月 | 0.1GB | **$0** |

**小計: $0**

### 2.8 Cloud Monitoring
| 項目 | 単価 | 利用量 | 月額コスト |
|------|------|---------|-----------|
| メトリクス | 無料枠: 150メトリクス | 20メトリクス | **$0** |

**小計: $0**

### 2.9 外部サービス

#### GitHub Actions
| 項目 | 単価 | 利用量 | 月額コスト |
|------|------|---------|-----------|
| Public リポジトリ | 無料 | 無制限 | **$0** |

**外部サービス小計: $0**

---

## 3. 総コスト

| カテゴリ | 月額コスト |
|----------|-----------|
| Firebase/Google Cloud | **$0.076** |
| 外部サービス | **$0** |
| **合計** | **$0.076** |

---

## 4. エラー追跡・モニタリング代替案

Sentry の代わりに以下の無料ソリューションを活用：

### 4.1 Google Cloud エラーレポート
- **Cloud Error Reporting**: 無料枠内でエラー集約・通知
- **Cloud Logging**: 構造化ログでエラー分析
- **Cloud Monitoring**: カスタムメトリクス・アラート

### 4.2 Next.js 組み込み機能
- **Error Boundary**: React エラーキャッチ
- **API Route エラーハンドリング**: サーバーサイドエラー管理
- **Vercel Analytics**: デプロイ時の無料分析（Vercel使用時）

### 4.3 開発時モニタリング
```javascript
// 簡易エラー追跡実装例
const logError = (error, context) => {
  console.error('Error:', error);
  // Cloud Logging へ送信
  fetch('/api/log-error', {
    method: 'POST',
    body: JSON.stringify({ error: error.message, context })
  });
};
```

---

## 5. スケール時の試算

### 5.1 100ユーザー規模（6ヶ月後想定）
| サービス | MVP（10ユーザー） | 100ユーザー | 差分 |
|----------|------------------|-------------|------|
| Firebase Authentication | $0 | $0 | $0 |
| Firebase Hosting | $0.003 | $0.03 | +$0.027 |
| Cloud Functions | $0 | $0.5 | +$0.5 |
| Firestore | $0 | $1.2 | +$1.2 |
| Cloud Storage | $0.073 | $7.3 | +$7.227 |
| 外部サービス | $0 | $0 | $0 |
| **合計** | **$0.076** | **$9.05** | **+$8.974** |

### 5.2 1,000ユーザー規模（1年後想定）
| サービス | 100ユーザー | 1,000ユーザー | 差分 |
|----------|-------------|---------------|------|
| Firebase/Google Cloud | $9.05 | $73 | +$63.95 |
| 外部サービス | $0 | $0 | $0 |
| **合計** | **$9.05** | **$73** | **+$63.95** |

---

## 6. コスト最適化策

### 6.1 短期（MVP段階）
- 全サービスをGoogle Cloud無料枠内で運用
- 開発環境は Firebase Emulator Suite 活用

### 6.2 中期（100ユーザー段階）
- Cloud Storage に Nearline/Coldline クラス活用で **30%削減**
- CDN キャッシュ最適化で egress 削減

### 6.3 長期（1,000ユーザー段階）
- Reserved instances 活用検討
- マルチクラウド戦略でベンダーロックイン回避
- 有料エラー追跡サービス導入検討（LogRocket, Rollbar等）

---

## 7. 予算アラート設定

| しきい値 | アクション |
|----------|------------|
| $20/月 | メール通知 |
| $50/月 | Slack 通知 + レビュー |
| $100/月 | 緊急レビュー + 利用制限検討 |

---

## 8. 備考

- 為替レート変動リスク（USD建て料金）
- Google Cloud 無料クレジット（$300）活用で初期コスト抑制
- 音声ファイル増加に伴うストレージコストが主要な変動要因
- エラー追跡は Google Cloud 標準機能で十分なMVP規模

---

**最終更新**: 2025-06-04  
**次回見直し**: 2025-07-04 