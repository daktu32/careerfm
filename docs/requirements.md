# システム要件定義書

バージョン: 1.0  
作成日: 2025-06-04  
作成者: （ご担当者名）

## 1. ドキュメント管理

1.1 目的  
　本書は「Career.fm」MVP の開発にあたり、システム要件を整理・定義することで、設計→開発→テスト→運用の一貫した指針とすることを目的とする。  

1.2 範囲  
　本書が対象とするのは、PRD（プロダクト要求定義）で定義されたMVP機能（ユーザー登録、音声アップロード、プロフィール入力、音声名刺生成、公開・シェア）並びにそれを支える非機能要件・技術的構成である。  

1.3 用語定義  
- MVP：Minimum Viable Product  
- TTS：Text-to-Speech  
- HTML5 Audio Player：ブラウザ組み込みの音声再生機能  

## 2. システム概要

Career.fm は、他己紹介風の「音声名刺」を手軽に生成・共有できるWebサービス。  
- ユーザーは事前に生成済みの音声（MP3/WAV）をアップロード  
- 名前・肩書き・リンク・自己紹介テキストを入力  
- システムが音声とプロフィールを組み合わせ、公開用URL付き音声名刺ページを生成  
- 生成されたページをSNSやプロフィールに貼って共有  

## 3. 機能要件

### 3.1 ユーザー登録／認証

- SNSログイン（X/Twitter、GitHub 等）  
- メールアドレス登録・ログイン（任意）  
- ユーザー情報管理（名前、メール、プロフィール写真）  

### 3.2 音声ファイル管理

- MP3・WAV ファイルアップロード  
- ファイルサイズ上限（例：10MB）  
- ファイル形式・拡張子チェック  
- Cloud Storage への保存・URL管理  

### 3.3 プロフィール入力

- 必須：名前、肩書き  
- 任意：自己紹介テキスト、外部リンク（X、note、LinkedIn 等）  
- フォームバリデーション（文字数制限、URL形式チェック）  

### 3.4 音声名刺生成

- アップロード音声を埋め込んだ公開ページを自動生成  
- 再生ボタン（HTML5 Audio Player）  
- レスポンシブ対応（スマホ／PC）  

### 3.5 公開・シェア

- 固定URL 発行  
- SNS シェアボタン（X、LinkedIn）  
- メタタグ設定（OGP, Twitter Card）  

## 4. 非機能要件

### 4.1 可用性

- 99.9% 稼働率を目標  
- 障害時のリトライ・ログ取得  

### 4.2 性能

- ページロードタイム 2 秒以内  
- 同時アップロード数：10 件／分程度を想定  

### 4.3 セキュリティ

- HTTPS 強制  
- 認証トークンの JWT 化・有効期限管理  
- 音声ファイルへの不正アクセス防止（S3 Bucket Policy + IAM）  

### 4.4 拡張性

- NotebookLM API 連携や自前TTS の追加を考慮したモジュラー設計  
- マイクロサービス化を視野に入れたレイヤ分割  

### 4.5 運用・保守

- ログ集約（CloudWatch Logs）  
- モニタリング（CloudWatch Metrics、X-Ray）  
- バックアップ／リストア手順定義  

## 5. 技術構成

| 層             | 技術スタック                             |
|---------------|---------------------------------------|
| フロントエンド   | Next.js + TypeScript + TailwindCSS         |
| バックエンド     | AWS Lambda + API Gateway                   |
| 認証           | Amazon Cognito                             |
| データベース     | Amazon DynamoDB                            |
| オブジェクトストレージ | Amazon S3                                  |
| CDN            | Amazon CloudFront                          |
| 再生コンポーネント  | HTML5 Audio Player                       |
| CI/CD          | GitHub Actions + AWS CDK                   |

## 6. 外部連携・インターフェース

### 6.1 SNS ログイン

- OAuth2.0 で X（Twitter）、GitHub など  

### 6.2 ストレージ連携

- Amazon S3 Presigned URL でのアップロード  
- CloudFront 経由でのダウンロード  

### 6.3 メール送信

- 認証メール・パスワードリセット：Amazon SES または Cognito 統合  

## 7. 制約／リスク

| 制約・リスク                 | 対応策                                     |
|----------------------------|-----------------------------------------|
| NotebookLM 利用規約違反       | MVP ではユーザー自身がアップロード、将来は自前TTS へ移行可能な設計 |
| 音声ファイル著作権            | 利用規約に同意させ、アップロード元の権利者確認を促す          |
| 個人情報保護（GDPR, 日本法） | プライバシーポリシー策定、同意取得、データ削除機能実装       |

## 8. 付録

### 8.1 略語

- PRD：Product Requirement Document  
- MVP：Minimum Viable Product  
- TTS：Text-to-Speech  
- OGP：Open Graph Protocol
